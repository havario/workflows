--- src/tls/xqc_tls.c
+++ src/tls/xqc_tls.c
@@ -382,7 +382,9 @@

     /* callback to Transport layer */
     if (tls->cbs->tp_cb) {
-        tls->cbs->tp_cb(peer_tp, tp_len, tls->user_data);
+        unsigned char tp_buf[tp_len];
+        memcpy(tp_buf, peer_tp, tp_len);
+        tls->cbs->tp_cb(tp_buf, tp_len, tls->user_data);
     }

     tls->flag |= XQC_TLS_FLAG_TRANSPORT_PARAM_RCVD;

