<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>IP Geolocation</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
</head>
<body class="bg-slate-50 font-sans p-3 md:p-6">
<div class="max-w-4xl mx-auto">
<h1 class="text-xl font-medium mb-6 text-center text-gray-700">IP Geolocation</h1>
<div class="grid md:grid-cols-1 gap-4">
<div class="bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden">
<div class="px-3 py-2 border-b border-gray-100">
<h2 class="text-sm font-medium text-gray-700">IP Location</h2>
</div>
<div class="p-3 text-sm">
{{if .Error}}
<div class="text-red-500">{{.Error}}</div>
{{else}}
<div class="font-mono text-gray-600">IP: {{.IP}}</div>
<div class="grid grid-cols-2 gap-x-2 gap-y-1 text-xs mt-2">
<div><span class="text-gray-500">Country:</span> {{.Country}}</div>
<div><span class="text-gray-500">Province:</span> {{.Province}}</div>
<div><span class="text-gray-500">City:</span> {{.City}}</div>
<div><span class="text-gray-500">District:</span> {{.District}}</div>
<div><span class="text-gray-500">Area:</span> {{.AreaName}}</div>
<div><span class="text-gray-500">Detail:</span> {{.Detail}}</div>
</div>
<div id="map" class="h-40 rounded-md mt-2"></div>
<script>
var map=L.map('map',{zoomControl:false,attributionControl:false}).setView([{{.Lat}},{{.Lng}}],10);
L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png',{subdomains:'abcd'}).addTo(map);
L.circleMarker([{{.Lat}},{{.Lng}}],{radius:6,color:'#3b82f6',weight:2,fillOpacity:0.3}).addTo(map);
setTimeout(()=>map.invalidateSize(),100);
</script>
{{end}}
</div>
</div>
</div>
<div class="text-center text-xs text-gray-400 mt-6">Powered by Meituan API & CARTO</div>
</div>
</body>
</html>
